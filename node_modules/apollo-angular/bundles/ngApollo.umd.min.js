!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("apollo-client"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("apollo-angular",["exports","@angular/core","apollo-client","rxjs","rxjs/operators"],e):e((t=t||self).ngApollo={},t.ng.core,t.apollo,t.rxjs,t.rxjs.operators)}(this,(function(t,e,n,r,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u}function c(t,e){return function(n,r){e(n,r,t)}}function a(t){return new r.Observable((function(e){return t().then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){e.closed||e.error(t)})),function(){return e.unsubscribe()}}))}var l=function(){function t(t){this.zone=t,this.now=Date.now?Date.now:function(){return+new Date}}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),this.zone.run((function(){return r.queueScheduler.schedule(t,e,n)}))},t}();function p(t){return t[r.observable]=function(){return t},t}function f(t,e){return t.pipe(o.observeOn(new l(e)))}var h=function(){function t(t,e,n){this.obsQuery=t;var i=f(r.from(p(this.obsQuery)),e);this.valueChanges=n.useInitialLoading?i.pipe(o.startWith(u(u({},this.obsQuery.getCurrentResult()),{error:void 0,partial:void 0,stale:!0}))):i,this.queryId=this.obsQuery.queryId}return t.prototype.result=function(){return this.obsQuery.result()},t.prototype.currentResult=function(){return this.obsQuery.currentResult()},t.prototype.getLastResult=function(){return this.obsQuery.getLastResult()},t.prototype.getLastError=function(){return this.obsQuery.getLastError()},t.prototype.resetLastResults=function(){return this.obsQuery.resetLastResults()},t.prototype.refetch=function(t){return this.obsQuery.refetch(t)},t.prototype.fetchMore=function(t){return this.obsQuery.fetchMore(t)},t.prototype.subscribeToMore=function(t){return this.obsQuery.subscribeToMore(t)},t.prototype.updateQuery=function(t){return this.obsQuery.updateQuery(t)},t.prototype.stopPolling=function(){return this.obsQuery.stopPolling()},t.prototype.startPolling=function(t){return this.obsQuery.startPolling(t)},t.prototype.setOptions=function(t){return this.obsQuery.setOptions(t)},t.prototype.setVariables=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!0),this.obsQuery.setVariables(t,e,n)},t}(),y=new e.InjectionToken("[apollo-angular] options"),d=new e.InjectionToken("[apollo-angular] named options"),b=function(){function t(t,e){this.ngZone=t,this._client=e}return t.prototype.watchQuery=function(t){return new h(this.ensureClient().watchQuery(u({},t)),this.ngZone,t)},t.prototype.query=function(t){var e=this;return a((function(){return e.ensureClient().query(u({},t))}))},t.prototype.mutate=function(t){var e=this;return a((function(){return e.ensureClient().mutate(u({},t))}))},t.prototype.subscribe=function(t,e){var n=r.from(p(this.ensureClient().subscribe(u({},t))));return e&&!0!==e.useZone?n:f(n,this.ngZone)},t.prototype.getClient=function(){return this._client},t.prototype.setClient=function(t){if(this._client)throw new Error("Client has been already defined");this._client=t},t.prototype.ensureClient=function(){return this.checkInstance(),this._client},t.prototype.checkInstance=function(){if(!this._client)throw new Error("Client has not been defined yet")},t}(),v=function(t){function r(e,n,r){var o=t.call(this,e)||this;if(o._ngZone=e,o.map=new Map,n&&o.createDefault(n),r&&"object"==typeof r)for(var i in r)if(r.hasOwnProperty(i)){var u=r[i];o.createNamed(i,u)}return o}return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(r,t),r.prototype.create=function(t,e){g(e)?this.createDefault(t):this.createNamed(e,t)},r.prototype.default=function(){return this},r.prototype.use=function(t){return g(t)?this.default():this.map.get(t)},r.prototype.createDefault=function(t){if(this.getClient())throw new Error("Apollo has been already created.");return this.setClient(new n.ApolloClient(t))},r.prototype.createNamed=function(t,e){if(this.map.has(t))throw new Error("Client "+t+" has been already created");this.map.set(t,new b(this._ngZone,new n.ApolloClient(e)))},r.prototype.removeClient=function(t){g(t)?this._client=void 0:this.map.delete(t)},r.ctorParameters=function(){return[{type:e.NgZone},{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[y]}]},{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[d]}]}]},r=s([e.Injectable(),c(1,e.Optional()),c(1,e.Inject(y)),c(2,e.Optional()),c(2,e.Inject(d))],r)}(b);function g(t){return!t||"default"===t}var m=function(){function t(t){this.apollo=t,this.client="default"}return t.prototype.watch=function(t,e){return this.apollo.use(this.client).watchQuery(u(u({},e),{variables:t,query:this.document}))},t.prototype.fetch=function(t,e){return this.apollo.use(this.client).query(u(u({},e),{variables:t,query:this.document}))},t.ctorParameters=function(){return[{type:v}]},t=s([e.Injectable()],t)}(),w=function(){function t(t){this.apollo=t,this.client="default"}return t.prototype.mutate=function(t,e){return this.apollo.use(this.client).mutate(u(u({},e),{variables:t,mutation:this.document}))},t.ctorParameters=function(){return[{type:v}]},t=s([e.Injectable()],t)}(),O=function(){function t(t){this.apollo=t,this.client="default"}return t.prototype.subscribe=function(t,e,n){return this.apollo.use(this.client).subscribe(u(u({},e),{variables:t,query:this.document}),n)},t.ctorParameters=function(){return[{type:v}]},t=s([e.Injectable()],t)}(),j=function(){function t(){}return t.prototype.transform=function(t,e){if(void 0===e&&(e=""),""!==e)return t&&t.data&&t.data[e]},t=s([e.Pipe({name:"select"})],t)}(),Q=[v],_=[j],P=function(){function t(){}return t=s([e.NgModule({providers:Q,declarations:_,exports:_})],t)}();t.APOLLO_NAMED_OPTIONS=d,t.APOLLO_OPTIONS=y,t.Apollo=v,t.ApolloBase=b,t.ApolloModule=P,t.Mutation=w,t.Query=m,t.QueryRef=h,t.SelectPipe=j,t.Subscription=O,t.ɵa=Q,t.ɵb=_,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngApollo.umd.min.js.map